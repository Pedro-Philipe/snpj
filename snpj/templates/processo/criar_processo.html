{% extends "base.html" %}
{% load widget_tweaks %}
{% block content %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
    <h2>CADASTRAR PROCESSO</h2>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="form-group">
            <div class="col-sm-7">
                <label for="{{ form.cpf_assistido.id_for_label }}"> CPF DO ASSISTIDO </label>
                <select class="form-control" id="assistidos" name="responsavel_processo">
                    {{oi}}
                        {% for assistido in assistidos %}
                        <option value="{{ assistido.cpf }}">{{ assistido.cpf }}</option>
                        {% endfor %}
                </select>
                <div class="alert alert-danger">
                    {{ form.cpf.errors }}
                </div>
            </div>
        </div>
            <br/>
            <div class="form-group">
                <div class="form-group">
                    <label for="{{ form.tipologia.id_for_label }}" class="col-sm-3 control-label">TIPOLOGIA
                        PROCESSUAL</label>
                    <div class="col-sm-9">
                        <select class="form-control" id="tipologia" name="tipologia">
                            <option value="Civel" selected="selected">Cível</option>
                            <option value="Criminal">Criminal</option>
                            <option value="Familiar">Familiar</option>
                            <option value="Trabalhista">Trabalhista</option>
                        </select>
                        {{ form.tipologia.errors }}
                    </div>
                </div>
            </div>
            <br/>
            <div class="form-group">
                <div class="form-group">
                    <label for="{{ form.data.id_for_label }}" class="col-sm-3 control-label">DATA DE RETORNO</label>

                    <div class="col-sm-9">
                        {% render_field form.data class="form-control date" %} {{ form.data.errors }}
                    </div>
                </div>
            </div>
            <br/>
            <div class="form-group">
                <div class="col-sm-7">
                    <label for="{{ form.descricao.id_for_label }}"> DESCRIÇÃO </label>
                    {% render_field form.descricao class="form-control" %} {{ form.nome.errors }}
                </div>
            </div>
            <br/>
            <div class="form-group">
                <label class="col-sm-3 ">Responsável pelo cadastro</label>
                <div class="col-sm-9">
                    <select class="form-control" id="responsavel_processo" name="responsavel_processo">
                        <option value="{{ request.user.usuario.nome_usuario }}">{{ request.user.usuario.nome_usuario }}</option>
                    </select>
                    {{ form.responsavel_processo.errors }}
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-7" align="center">
                    <br/>
                    <input type="submit" class="btn btn-success btn-lg center-block" value="SALVAR">
                </div>
            </div>
        </div>
    </form>
{% endblock %}

{% block js %}
    {% verbatim %}
    <script type="text/javascript">
        $(document).ready(function () {
            $('#assistidos').select2();
            $(".form-horizontal").submit(function () {
                $(".cpf").formatter().resetPattern('{{99999999999}}');
                $(".cep").formatter({
                    'pattern': '{{99}}.{{999}}-{{999}}',
                    'persistent': false,
                });
                $(".telefone").mask('(00)00000-0000');
            });
        });
    </script>
    {% endverbatim %}
{% endblock js %}